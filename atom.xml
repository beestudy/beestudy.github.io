<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>日常筑巢计划</title>
  
  <subtitle>beestudy</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-01-21T03:27:32.858Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>bee</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://example.com/2021/01/21/dbeaver/"/>
    <id>http://example.com/2021/01/21/dbeaver/</id>
    <published>2021-01-21T03:27:32.858Z</published>
    <updated>2021-01-21T03:27:32.858Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>mysql基础知识</title>
    <link href="http://example.com/2021/01/20/mysql2/"/>
    <id>http://example.com/2021/01/20/mysql2/</id>
    <published>2021-01-20T10:55:00.000Z</published>
    <updated>2021-01-20T10:56:24.674Z</updated>
    
    <content type="html"><![CDATA[<h2 id="连接Mysql"><a href="#连接Mysql" class="headerlink" title="连接Mysql"></a>连接Mysql</h2><p>格式 mysql -h主机地址 -u用户名 -p用户密码</p><h3 id="连接本机上的mysql"><a href="#连接本机上的mysql" class="headerlink" title="连接本机上的mysql"></a>连接本机上的mysql</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mysql -uroot -p</span></span><br></pre></td></tr></table></figure><h3 id="连接到远程主机上的mysql"><a href="#连接到远程主机上的mysql" class="headerlink" title="连接到远程主机上的mysql"></a>连接到远程主机上的mysql</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mysql -h110.110.110.110 -urrot -p</span></span><br></pre></td></tr></table></figure><p>连接远程主机ip为110.110.110.110的数据库</p><h3 id="退出mysql"><a href="#退出mysql" class="headerlink" title="退出mysql"></a>退出mysql</h3><p>命令：exit （回车）</p><h2 id="mysql常用命令"><a href="#mysql常用命令" class="headerlink" title="mysql常用命令"></a>mysql常用命令</h2><h3 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h3><p>create database ruozedata;  #新建数据库<br>grant all privileges on ruozedata.* to jepson@’%’ identified by ‘ruozedata’; #赋予权限<br>flush privileges;  #刷新权限<br><strong>对于mysql的用户操作，比如权限相关的 ，最后一步必须执行刷新权限。</strong><br> %代表了 任意的客户端的IP地址 都被允许使用jepson用户来远程访问<br> grant all privileges on ruozedata.* to jepson@’16.2.3.%’ identified by ‘ruozedata’;<br> 16.2.3这个网段的所有ip都允许有权限去访问，包括16.2.3.1和16.2.3.2等等</p><h3 id="显示数据库"><a href="#显示数据库" class="headerlink" title="显示数据库"></a>显示数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure><h3 id="选择mysql数据库"><a href="#选择mysql数据库" class="headerlink" title="选择mysql数据库"></a>选择mysql数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br></pre></td></tr></table></figure><h3 id="显示表"><a href="#显示表" class="headerlink" title="显示表"></a>显示表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure><h3 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc db;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create table DB;</span><br></pre></td></tr></table></figure><h3 id="显示用户正在运行的线程"><a href="#显示用户正在运行的线程" class="headerlink" title="显示用户正在运行的线程"></a>显示用户正在运行的线程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show processlist;</span><br></pre></td></tr></table></figure><h3 id="杀会话"><a href="#杀会话" class="headerlink" title="杀会话"></a>杀会话</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill 7;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;连接Mysql&quot;&gt;&lt;a href=&quot;#连接Mysql&quot; class=&quot;headerlink&quot; title=&quot;连接Mysql&quot;&gt;&lt;/a&gt;连接Mysql&lt;/h2&gt;&lt;p&gt;格式 mysql -h主机地址 -u用户名 -p用户密码&lt;/p&gt;
&lt;h3 id=&quot;连接本机上的mys</summary>
      
    
    
    
    
    <category term="mysql" scheme="http://example.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>mysql的安装</title>
    <link href="http://example.com/2021/01/20/mysql1/"/>
    <id>http://example.com/2021/01/20/mysql1/</id>
    <published>2021-01-20T08:24:00.000Z</published>
    <updated>2021-01-20T08:31:17.589Z</updated>
    
    <content type="html"><![CDATA[<h2 id="下载解压包"><a href="#下载解压包" class="headerlink" title="下载解压包"></a>下载解压包</h2><p>mysql-5.7.11-linux-glibc2.5-x86_64.tar.gz</p><h2 id="解压到指定目录并改名为mysql"><a href="#解压到指定目录并改名为mysql" class="headerlink" title="解压到指定目录并改名为mysql"></a>解压到指定目录并改名为mysql</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tar xzvf mysql-5.7.11-linux-glibc2.5-x86_64.tar.gz -C /usr/<span class="built_in">local</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mv mysql-5.7.11-linux/-glibc2.5-x86_64/ mysql</span></span><br></pre></td></tr></table></figure><h2 id="创建文件夹"><a href="#创建文件夹" class="headerlink" title="创建文件夹"></a>创建文件夹</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir mysql/arch mysql/data mysql/data mysql/tmp</span></span><br></pre></td></tr></table></figure><p>其中arch为存放归档，binlog二进制数据的文件夹<br>data为存放正常表结构数据的文件夹<br>tmp为存放临时文件的文件夹</p><h2 id="配置my-cnf"><a href="#配置my-cnf" class="headerlink" title="配置my.cnf"></a>配置my.cnf</h2><p>进入/etc/my.cnf</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vi /etc/my.cnf</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">port            &#x3D; 3306</span><br><span class="line">socket          &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;mysql.sock</span><br><span class="line">default-character-set&#x3D;utf8mb4</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">port            &#x3D; 3306</span><br><span class="line">socket          &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;mysql.sock</span><br><span class="line"></span><br><span class="line">skip-slave-start</span><br><span class="line"></span><br><span class="line">skip-external-locking</span><br><span class="line">key_buffer_size &#x3D; 256M</span><br><span class="line">sort_buffer_size &#x3D; 2M</span><br><span class="line">read_buffer_size &#x3D; 2M</span><br><span class="line">read_rnd_buffer_size &#x3D; 4M</span><br><span class="line">query_cache_size&#x3D; 32M</span><br><span class="line">max_allowed_packet &#x3D; 16M</span><br><span class="line">myisam_sort_buffer_size&#x3D;128M</span><br><span class="line">tmp_table_size&#x3D;32M</span><br><span class="line"></span><br><span class="line">table_open_cache &#x3D; 512</span><br><span class="line">thread_cache_size &#x3D; 8</span><br><span class="line">wait_timeout &#x3D; 86400</span><br><span class="line">interactive_timeout &#x3D; 86400</span><br><span class="line">max_connections &#x3D; 600</span><br><span class="line"></span><br><span class="line"># Try number of CPU&#39;s*2 for thread_concurrency</span><br><span class="line">#thread_concurrency &#x3D; 32 </span><br><span class="line"></span><br><span class="line">#isolation level and default engine </span><br><span class="line">default-storage-engine &#x3D; INNODB</span><br><span class="line">transaction-isolation &#x3D; READ-COMMITTED</span><br><span class="line"></span><br><span class="line">server-id  &#x3D; 1739</span><br><span class="line">basedir     &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class="line">datadir     &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data</span><br><span class="line">pid-file     &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;hostname.pid</span><br><span class="line"></span><br><span class="line">#open performance schema</span><br><span class="line">log-warnings</span><br><span class="line">sysdate-is-now</span><br><span class="line"></span><br><span class="line">binlog_format &#x3D; ROW</span><br><span class="line">log_bin_trust_function_creators&#x3D;1</span><br><span class="line">log-error  &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;hostname.err</span><br><span class="line">log-bin &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;arch&#x2F;mysql-bin</span><br><span class="line">expire_logs_days &#x3D; 7</span><br><span class="line"></span><br><span class="line">innodb_write_io_threads&#x3D;16</span><br><span class="line"></span><br><span class="line">relay-log  &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;relay_log&#x2F;relay-log</span><br><span class="line">relay-log-index &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;relay_log&#x2F;relay-log.index</span><br><span class="line">relay_log_info_file&#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;relay_log&#x2F;relay-log.info</span><br><span class="line"></span><br><span class="line">log_slave_updates&#x3D;1</span><br><span class="line">gtid_mode&#x3D;OFF</span><br><span class="line">enforce_gtid_consistency&#x3D;OFF</span><br><span class="line"></span><br><span class="line"># slave</span><br><span class="line">slave-parallel-type&#x3D;LOGICAL_CLOCK</span><br><span class="line">slave-parallel-workers&#x3D;4</span><br><span class="line">master_info_repository&#x3D;TABLE</span><br><span class="line">relay_log_info_repository&#x3D;TABLE</span><br><span class="line">relay_log_recovery&#x3D;ON</span><br><span class="line"></span><br><span class="line">#other logs</span><br><span class="line">#general_log &#x3D;1</span><br><span class="line">#general_log_file  &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;general_log.err</span><br><span class="line">#slow_query_log&#x3D;1</span><br><span class="line">#slow_query_log_file&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;slow_log.err</span><br><span class="line"></span><br><span class="line">#for replication slave</span><br><span class="line">sync_binlog &#x3D; 500</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#for innodb options </span><br><span class="line">innodb_data_home_dir &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;</span><br><span class="line">innodb_data_file_path &#x3D; ibdata1:1G;ibdata2:1G:autoextend</span><br><span class="line"></span><br><span class="line">innodb_log_group_home_dir &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;arch</span><br><span class="line">innodb_log_files_in_group &#x3D; 4</span><br><span class="line">innodb_log_file_size &#x3D; 1G</span><br><span class="line">innodb_log_buffer_size &#x3D; 200M</span><br><span class="line"></span><br><span class="line">#根据生产需要，调整pool size </span><br><span class="line">innodb_buffer_pool_size &#x3D; 2G</span><br><span class="line">#innodb_additional_mem_pool_size &#x3D; 50M #deprecated in 5.6</span><br><span class="line">tmpdir &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;tmp</span><br><span class="line"></span><br><span class="line">innodb_lock_wait_timeout &#x3D; 1000</span><br><span class="line">#innodb_thread_concurrency &#x3D; 0</span><br><span class="line">innodb_flush_log_at_trx_commit &#x3D; 2</span><br><span class="line"></span><br><span class="line">innodb_locks_unsafe_for_binlog&#x3D;1</span><br><span class="line"></span><br><span class="line">#innodb io features: add for mysql5.5.8</span><br><span class="line">performance_schema</span><br><span class="line">innodb_read_io_threads&#x3D;4</span><br><span class="line">innodb-write-io-threads&#x3D;4</span><br><span class="line">innodb-io-capacity&#x3D;200</span><br><span class="line">#purge threads change default(0) to 1 for purge</span><br><span class="line">innodb_purge_threads&#x3D;1</span><br><span class="line">innodb_use_native_aio&#x3D;on</span><br><span class="line"></span><br><span class="line">#case-sensitive file names and separate tablespace</span><br><span class="line">innodb_file_per_table &#x3D; 1</span><br><span class="line">lower_case_table_names&#x3D;1</span><br><span class="line"></span><br><span class="line">[mysqldump]</span><br><span class="line">quick</span><br><span class="line">max_allowed_packet &#x3D; 128M</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">no-auto-rehash</span><br><span class="line">default-character-set&#x3D;utf8mb4</span><br><span class="line"></span><br><span class="line">[mysqlhotcopy]</span><br><span class="line">interactive-timeout</span><br><span class="line"></span><br><span class="line">[myisamchk]</span><br><span class="line">key_buffer_size &#x3D; 256M</span><br><span class="line">sort_buffer_size &#x3D; 256M</span><br><span class="line">read_buffer &#x3D; 2M</span><br><span class="line">write_buffer &#x3D; 2M</span><br></pre></td></tr></table></figure><h2 id="创建用户组及用户"><a href="#创建用户组及用户" class="headerlink" title="创建用户组及用户"></a>创建用户组及用户</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop39 local]# groupadd -g 101 dba</span><br><span class="line">[root@hadoop39 local]# useradd -u 514 -g dba -G root -d /usr/local/mysql mysqladmin</span><br><span class="line">[root@hadoop39 local]# id mysqladmin</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uid&#x3D;514(mysqladmin) gid&#x3D;101(dba) groups&#x3D;101(dba),0(root)</span><br></pre></td></tr></table></figure><p>可以看到用户mysqladmin和用户组dba都已经创建成功，且mysqladmin也关联到dba用户组<br>如果之前有mysqladmin用户，那么只需要修改其用户组为dba</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> usermod -u 514 -g dba -G root -d /usr/<span class="built_in">local</span>/mysql mysqladmin</span></span><br></pre></td></tr></table></figure><h2 id="处理样式丢失"><a href="#处理样式丢失" class="headerlink" title="处理样式丢失"></a>处理样式丢失</h2><p>此时切换到mysqladmin是会出现样式丢失的现象</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> su - mysqladmin</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-bash-4.2$</span><br></pre></td></tr></table></figure><p>需要copy环境变量配置文件至mysqladmin用户的home目录中</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop39 local]# cp /etc/skel/.* /usr/local/mysql</span><br></pre></td></tr></table></figure><h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop39 local]# vi mysql/.bashrc</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># .bashrc</span><br><span class="line"># Get the aliases and functions</span><br><span class="line"></span><br><span class="line">if [ -f ~&#x2F;.bashrc ]; then</span><br><span class="line">        . ~&#x2F;.bashrc</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># User specific environment and startup programs</span><br><span class="line">export MYSQL_BASE&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql</span><br><span class="line">export PATH&#x3D;$&#123;MYSQL_BASE&#125;&#x2F;bin:$PATH</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">unset USERNAME</span><br><span class="line"></span><br><span class="line">#stty erase ^H</span><br><span class="line">set umask to 022</span><br><span class="line">umask 022</span><br><span class="line">PS1&#x3D;&#96;uname -n&#96;&quot;:&quot;&#39;$USER&#39;&quot;:&quot;&#39;$PWD&#39;&quot;:&gt;&quot;; export PS1</span><br><span class="line"></span><br><span class="line">## end</span><br></pre></td></tr></table></figure><h2 id="赋予权限"><a href="#赋予权限" class="headerlink" title="赋予权限"></a>赋予权限</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop39 local]# chown  mysqladmin:dba /etc/my.cnf </span><br><span class="line">[root@hadoop39 local]# chmod  640 /etc/my.cnf </span><br><span class="line">[root@hadoop39 local]# chown -R mysqladmin:dba /usr/local/mysql</span><br><span class="line">[root@hadoop39 local]# chmod -R 755 /usr/local/mysql </span><br></pre></td></tr></table></figure><p>/etc/my.cnf 640 rw-r—–<br>/usr/local/mysql/ 755 rwxr-xr-x<br>此时切换到mysqladmin样式发生了改变，现实了当前的路径，使用起来比较方便</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> su -mysqladmin</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop001:mysqladmin:&#x2F;usr&#x2F;local&#x2F;mysql:&gt;</span><br></pre></td></tr></table></figure><h2 id="配置服务及开机自启动"><a href="#配置服务及开机自启动" class="headerlink" title="配置服务及开机自启动"></a>配置服务及开机自启动</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop39 local]# cd /usr/local/mysql</span><br><span class="line"><span class="meta">#</span><span class="bash">将服务文件拷贝到init.d下，并重命名为mysql</span></span><br><span class="line">[root@hadoop39 mysql]# cp support-files/mysql.server /etc/rc.d/init.d/mysql </span><br><span class="line"><span class="meta">#</span><span class="bash">赋予可执行权限</span></span><br><span class="line">[root@hadoop39 mysql]# chmod +x /etc/rc.d/init.d/mysql</span><br><span class="line"><span class="meta">#</span><span class="bash">删除服务</span></span><br><span class="line">[root@hadoop39 mysql]# chkconfig --del mysql</span><br><span class="line"><span class="meta">#</span><span class="bash">添加服务</span></span><br><span class="line">[root@hadoop39 mysql]# chkconfig --add mysql</span><br><span class="line">[root@hadoop39 mysql]# chkconfig --level 345 mysql on</span><br></pre></td></tr></table></figure><p>但是这一步不能真正的设置开机自启动，需要在/etc/rc.local里配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop39 mysql]# vi /etc/rc.local</span><br></pre></td></tr></table></figure><p>在里面加上以下两行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">touch &#x2F;var&#x2F;lock&#x2F;subsys&#x2F;local</span><br><span class="line">su - mysqladmin -c &quot;&#x2F;etc&#x2F;init.d&#x2F;mysql start --federated&quot;</span><br></pre></td></tr></table></figure><h2 id="安装libaio包及安装mysql的初始db"><a href="#安装libaio包及安装mysql的初始db" class="headerlink" title="安装libaio包及安装mysql的初始db"></a>安装libaio包及安装mysql的初始db</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop39 mysql]# yum -y install libaio   #【安装libaio】</span><br><span class="line">[root@hadoop39 mysql]# sudo su - mysqladmin</span><br><span class="line">hadoop39.ruoze:mysqladmin:/usr/local/mysql:&gt; bin/mysqld \   #【安装mysql的初始db，这一步较慢】</span><br><span class="line">--defaults-file=/etc/my.cnf \</span><br><span class="line">--user=mysqladmin \</span><br><span class="line">--basedir=/usr/local/mysql/ \</span><br><span class="line">--datadir=/usr/local/mysql/data/ \</span><br><span class="line">--initialize</span><br></pre></td></tr></table></figure><p>在初始化时如果加上 –initial-insecure，则会创建空密码的 root@localhost 账号，否则会创建带密码的 root@localhost 账号，密码直接写在 log-error 日志文件中<br>（在5.6版本中是放在 ~/.mysql_secret 文件里，更加隐蔽，不熟悉的话可能会无所适从）</p><h2 id="查看临时密码"><a href="#查看临时密码" class="headerlink" title="查看临时密码"></a>查看临时密码</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop39.ruoze:mysqladmin:/usr/local/mysql/data:&gt;cat hostname.err |grep password </span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2017-07-22T02:15:29.439671Z 1 [Note] A temporary password is generated for root@localhost: kFCqrXeh2y(0</span><br></pre></td></tr></table></figure><p>注意，冒号后面的所有字符均为临时密码，包括冒号逗号之类的符号</p><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop39.ruoze:mysqladmin:/usr/local/mysql/data:&gt;/usr/local/mysql/bin/mysqld_safe --defaults-file=/etc/my.cnf &amp;</span><br></pre></td></tr></table></figure><h2 id="登录及修改root密码"><a href="#登录及修改root密码" class="headerlink" title="登录及修改root密码"></a>登录及修改root密码</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop39.ruoze:mysqladmin:/usr/local/mysql/data:&gt;mysql -uroot -p&#x27;kFCqrXeh2y(0&#x27;</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter user root@localhost identified by &#x27;ruozedata&#x27;; #修改密码为ruozedata</span><br><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;ruozedata&#x27; ;  #创建用户可以使用任何ip链接（&#x27;root&#x27;@&#x27;%&#x27;),并且可以使用所有库（*.*）</span><br><span class="line">mysql&gt; flush privileges; #刷新权限</span><br><span class="line">mysql&gt; exit;</span><br></pre></td></tr></table></figure><h2 id="重启mysql-并使用root登录"><a href="#重启mysql-并使用root登录" class="headerlink" title="重启mysql 并使用root登录"></a>重启mysql 并使用root登录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hadoop39.ruoze:mysqladmin:/usr/local/mysql:&gt; service mysql restart</span><br><span class="line">hadoop39.ruoze:mysqladmin:/usr/local/mysql/data:&gt;mysql -uroot -p</span><br></pre></td></tr></table></figure><p>尽量不要使用mysql -uroot -p（密码）命令直接输入你的密码<br>这样如果被入侵，使用history命令可以得到你的密码</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;下载解压包&quot;&gt;&lt;a href=&quot;#下载解压包&quot; class=&quot;headerlink&quot; title=&quot;下载解压包&quot;&gt;&lt;/a&gt;下载解压包&lt;/h2&gt;&lt;p&gt;mysql-5.7.11-linux-glibc2.5-x86_64.tar.gz&lt;/p&gt;
&lt;h2 id=&quot;解压到指</summary>
      
    
    
    
    
    <category term="mysql" scheme="http://example.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>JDK的安装</title>
    <link href="http://example.com/2021/01/20/jdk1/"/>
    <id>http://example.com/2021/01/20/jdk1/</id>
    <published>2021-01-20T04:05:00.000Z</published>
    <updated>2021-01-20T04:06:32.844Z</updated>
    
    <content type="html"><![CDATA[<p><strong>jdk文件必须要放到/usr/java目录下，如果没有该目录，先进行创建</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mkdir -p /usr/java</span></span><br></pre></td></tr></table></figure><p><strong>将jdk解压到/usr/java目录中</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">tar -xzvf jdk-8u181-linux-x64.tar.gz -C /usr/java/</span></span><br></pre></td></tr></table></figure><p><strong>给jdk赋予权限</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /usr/java</span></span><br><span class="line"><span class="meta">#</span><span class="bash">chown -R root:root jdk1.8.0_181</span></span><br></pre></td></tr></table></figure><p><strong>配置环境变量</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/profile</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">ruozedata env</span></span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.8.0_181</span><br><span class="line">export PATH=$JAVA_HOME/bin:$PATH</span><br></pre></td></tr></table></figure><p><strong>生效环境变量</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">source</span> /etc/profile</span></span><br></pre></td></tr></table></figure><p><strong>查看是否成功</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> java -version</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;jdk文件必须要放到/usr/java目录下，如果没有该目录，先进行创建&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=</summary>
      
    
    
    
    
    <category term="jdk" scheme="http://example.com/tags/jdk/"/>
    
  </entry>
  
  <entry>
    <title>set -u用法</title>
    <link href="http://example.com/2021/01/11/shell1/"/>
    <id>http://example.com/2021/01/11/shell1/</id>
    <published>2021-01-11T11:34:00.000Z</published>
    <updated>2021-01-11T11:35:04.747Z</updated>
    
    <content type="html"><![CDATA[<p><strong>脚本场景：业务逻辑判断 赋值的 LOG_PATH=/xxx/yyy 漏了一种没有赋值</strong><br>此时rm -rf ${LOG_PATH}/*  等价于 rm -rf /*<br>避免方法1.每次删除之前，都判断${LOG_PATH}目录是否存在<br>2.set -u参数  在脚本的 第一行#!/bin/bash ,在第二行写</p><h2 id="set-u-用法"><a href="#set-u-用法" class="headerlink" title="set -u 用法"></a>set -u 用法</h2><p>BASH 脚本的 set 命令有很多参数，在实际应用中有些写错的内容，反而被脚本忽略了。set -u 就可以让脚本遇到错误时停止执行，并指出错误的行数信息。本文主要介绍 set -u （set -o nounset）命令的相关用法。<br>执行脚本的时候，如果遇到不存在的变量，Bash 默认忽略它。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env bash</span><br><span class="line"></span><br><span class="line">echo $a</span><br><span class="line">echo bar</span><br></pre></td></tr></table></figure><p>上面代码中，$a是一个不存在的变量。执行结果如下。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ bash script.sh</span><br><span class="line"></span><br><span class="line">bar</span><br></pre></td></tr></table></figure><p>可以看到，echo $a输出了一个空行，Bash 忽略了不存在的$a，然后继续执行echo bar。大多数情况下，这不是开发者想要的行为，遇到变量不存在，脚本应该报错，而不是一声不响地往下执行。</p><p>set -u就用来改变这种行为。脚本在头部加上它，遇到不存在的变量就会报错，并停止执行。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env bash</span><br><span class="line">set -u</span><br><span class="line"></span><br><span class="line">echo $a</span><br><span class="line">echo bar</span><br></pre></td></tr></table></figure><p>运行结果如下。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ bash script.sh</span><br><span class="line">bash: script.sh:行4: a: 未绑定的变量</span><br></pre></td></tr></table></figure><p>可以看到，脚本报错了，并且不再执行后面的语句。</p><p>-u还有另一种写法-o nounset，两者是等价的。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set -o nounset</span><br></pre></td></tr></table></figure><p>以上就是 shell 脚本 set -u 的作用。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;脚本场景：业务逻辑判断 赋值的 LOG_PATH=/xxx/yyy 漏了一种没有赋值&lt;/strong&gt;&lt;br&gt;此时rm -rf ${LOG_PATH}/*  等价于 rm -rf /*&lt;br&gt;避免方法1.每次删除之前，都判断${LOG_PATH}目录是否存在</summary>
      
    
    
    
    
    <category term="shell" scheme="http://example.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>linux练习题目</title>
    <link href="http://example.com/2020/11/24/linuxtwo/"/>
    <id>http://example.com/2020/11/24/linuxtwo/</id>
    <published>2020-11-24T03:34:00.000Z</published>
    <updated>2021-01-19T05:50:50.903Z</updated>
    
    <content type="html"><![CDATA[<h2 id="日常练习题目"><a href="#日常练习题目" class="headerlink" title="日常练习题目"></a>日常练习题目</h2><h3 id="1-查看当前目录"><a href="#1-查看当前目录" class="headerlink" title="1.查看当前目录"></a>1.查看当前目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">pwd</span></span></span><br></pre></td></tr></table></figure><h3 id="2-切换到上一层目录"><a href="#2-切换到上一层目录" class="headerlink" title="2.切换到上一层目录"></a>2.切换到上一层目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ..</span></span><br></pre></td></tr></table></figure><h3 id="3-切换到上一次目录"><a href="#3-切换到上一次目录" class="headerlink" title="3. 切换到上一次目录"></a>3. 切换到上一次目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> -</span></span><br></pre></td></tr></table></figure><h3 id="4-高危命令有哪些"><a href="#4-高危命令有哪些" class="headerlink" title="4. 高危命令有哪些"></a>4. 高危命令有哪些</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;&quot;</span> &gt; 1.long</span></span><br></pre></td></tr></table></figure><p>此命令会覆盖1.log</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> rm -rf /</span></span><br></pre></td></tr></table></figure><p>此命令会强制删除/下的所有文件</p><h3 id="5-文件夹相关的命令有哪些"><a href="#5-文件夹相关的命令有哪些" class="headerlink" title="5. 文件夹相关的命令有哪些"></a>5. 文件夹相关的命令有哪些</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mkdir     创建</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> du -sh     查看文件夹大小</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp  复制</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mv          移动</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chmod/chown    权限相关</span></span><br></pre></td></tr></table></figure><h3 id="6-常用的-R参数的命令"><a href="#6-常用的-R参数的命令" class="headerlink" title="6. 常用的-R参数的命令"></a>6. 常用的-R参数的命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> chmod -R</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chown -R</span></span><br></pre></td></tr></table></figure><p>此处的-R意为：处理指定目录以及其子目录下的所有文件<br>在整个linux命令生涯中，只有这两个是大R参数。其他表示递归 文件夹的 都是小r</p><h3 id="7-vi命令，简述编辑保存流程的快捷键"><a href="#7-vi命令，简述编辑保存流程的快捷键" class="headerlink" title="7. vi命令，简述编辑保存流程的快捷键"></a>7. vi命令，简述编辑保存流程的快捷键</h3><p>vi，i，esc，ctrl+：，wq</p><h3 id="8-绝对路径和相对路径的区别"><a href="#8-绝对路径和相对路径的区别" class="headerlink" title="8. 绝对路径和相对路径的区别"></a>8. 绝对路径和相对路径的区别</h3><p>绝对路径：/根目录开头，路径是齐全的<br>相对路径：不是以/开头，路径是短的<br>在编写shell的时候，尽量使用绝对路径</p><h3 id="9-隐藏文件或文件夹如何查看，有何特点"><a href="#9-隐藏文件或文件夹如何查看，有何特点" class="headerlink" title="9. 隐藏文件或文件夹如何查看，有何特点"></a>9. 隐藏文件或文件夹如何查看，有何特点</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ll -a</span></span><br></pre></td></tr></table></figure><p>隐藏文件和文件夹都是以.开头</p><h3 id="10-如何查找服务器上，名称含有xx的文件"><a href="#10-如何查找服务器上，名称含有xx的文件" class="headerlink" title="10. 如何查找服务器上，名称含有xx的文件"></a>10. 如何查找服务器上，名称含有xx的文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> find / -name <span class="string">&#x27;*xx*&#x27;</span></span></span><br></pre></td></tr></table></figure><h3 id="11-级联创建文件夹参数是什么"><a href="#11-级联创建文件夹参数是什么" class="headerlink" title="11.级联创建文件夹参数是什么"></a>11.级联创建文件夹参数是什么</h3><p>-p</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mkdir -p 1 2 3</span></span><br></pre></td></tr></table></figure><h3 id="12-移动复制什么区别，是否可以改名"><a href="#12-移动复制什么区别，是否可以改名" class="headerlink" title="12.移动复制什么区别，是否可以改名"></a>12.移动复制什么区别，是否可以改名</h3><p>复制最终产生两份文件    速度慢<br>移动最终只有一份文件    速度快<br>都可以改名</p><h3 id="13-rwx分别代表数字多少"><a href="#13-rwx分别代表数字多少" class="headerlink" title="13.rwx分别代表数字多少"></a>13.rwx分别代表数字多少</h3><p>r-&gt;4 w-&gt;2 x-&gt;1</p><h3 id="14-rwxr–r-x-数字多少"><a href="#14-rwxr–r-x-数字多少" class="headerlink" title="14.rwxr–r-x  数字多少"></a>14.rwxr–r-x  数字多少</h3><p>rwx -&gt;7     r– -&gt;4     r-x -&gt;5<br>所以就是745</p><h3 id="15-rwxr–r-x-代表什么"><a href="#15-rwxr–r-x-代表什么" class="headerlink" title="15. rwxr–r-x 代表什么"></a>15. rwxr–r-x 代表什么</h3><p>所属用户,所属用户组其他成员,其他用户组成员<br>文件的所有者具有读写执权限<br>文件所属组的用户只有读权限<br>其他组的用户具有读执权限</p><h3 id="16-查看命令帮助-要看什么"><a href="#16-查看命令帮助-要看什么" class="headerlink" title="16.查看命令帮助, 要看什么"></a>16.查看命令帮助, 要看什么</h3><p>命令 –help，看usage用法还有option选项 命令后跟的参数<br>【】为可选参数</p><h3 id="17-发现一个用户登录不上或者无法执行命令，是什么文件问题"><a href="#17-发现一个用户登录不上或者无法执行命令，是什么文件问题" class="headerlink" title="17.发现一个用户登录不上或者无法执行命令，是什么文件问题"></a>17.发现一个用户登录不上或者无法执行命令，是什么文件问题</h3><p>/etc/passwd</p><h3 id="18-切换用户带-，表示什么"><a href="#18-切换用户带-，表示什么" class="headerlink" title="18.切换用户带  -，表示什么"></a>18.切换用户带  -，表示什么</h3><p>切换该用户并执行该用户的环境变量</p><h3 id="19-临时获取root权限-，会配置吗？-执行要加什么？"><a href="#19-临时获取root权限-，会配置吗？-执行要加什么？" class="headerlink" title="19.临时获取root权限 ，会配置吗？ 执行要加什么？"></a>19.临时获取root权限 ，会配置吗？ 执行要加什么？</h3><p>使用root用户在/etc/sudoers 给用户加上ALL，如:ruozedata  ALL=(ALL)       ALL<br>执行加sudo</p><h3 id="20-vi命令的三种模式"><a href="#20-vi命令的三种模式" class="headerlink" title="20.vi命令的三种模式"></a>20.vi命令的三种模式</h3><p>命令行模式、编辑模式、尾行模式</p><h3 id="21-tail-f-和tail-F-区别"><a href="#21-tail-f-和tail-F-区别" class="headerlink" title="21.tail -f 和tail -F 区别"></a>21.tail -f 和tail -F 区别</h3><p>-f   假如文件被移除 然后重命名 就无法再监控到文件<br>-F   假如文件被移除 然后重命名 会不断的retry尝试 去监控文件，直到监控到位<br>-F = -f +retry</p><h3 id="22-管道符是什么-，过滤是什么"><a href="#22-管道符是什么-，过滤是什么" class="headerlink" title="22.管道符是什么 ，过滤是什么"></a>22.管道符是什么 ，过滤是什么</h3><p>管道符 |     一个命令的标准输出传送到另一个命令的标准输入中<br>过滤 grep</p><h3 id="23-别名语法是什么"><a href="#23-别名语法是什么" class="headerlink" title="23.别名语法是什么"></a>23.别名语法是什么</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">alias</span> p= <span class="string">&#x27;&#x27;</span></span></span><br></pre></td></tr></table></figure><h3 id="24-个人环境变量用-bash-profile还是-bashrc"><a href="#24-个人环境变量用-bash-profile还是-bashrc" class="headerlink" title="24.个人环境变量用 .bash_profile还是.bashrc"></a>24.个人环境变量用 .bash_profile还是.bashrc</h3><p>用.bashrc</p><h3 id="25-tab按1次-，2次分别什么意思"><a href="#25-tab按1次-，2次分别什么意思" class="headerlink" title="25.tab按1次 ，2次分别什么意思"></a>25.tab按1次 ，2次分别什么意思</h3><p>tab键一次，只有1个命令自动补全<br>按二次，会把当前匹配到的所有打印出来，再挑选</p><h3 id="26-history-c-是干什么"><a href="#26-history-c-是干什么" class="headerlink" title="26.history -c 是干什么"></a>26.history -c 是干什么</h3><p>清空历史命令(堡垒机无效哦)</p><h3 id="27-chmod-R-777-这个命令生产上是否允许执行？"><a href="#27-chmod-R-777-这个命令生产上是否允许执行？" class="headerlink" title="27.chmod -R 777 /  这个命令生产上是否允许执行？"></a>27.chmod -R 777 /  这个命令生产上是否允许执行？</h3><p>不允许,会把根目录下所有文件所有用户都可以读写执行了，执行了就等于开放所有文件的所有权限给所有人了</p><h3 id="28-除了ftp-sftp上传下载工具，还有什么命令？"><a href="#28-除了ftp-sftp上传下载工具，还有什么命令？" class="headerlink" title="28.除了ftp sftp上传下载工具，还有什么命令？"></a>28.除了ftp sftp上传下载工具，还有什么命令？</h3><p>rz(上传) sz(下载)<br>默认系统不自带，安装命令是<br>sudo yum install lrzsz -y</p><h3 id="29-使用vi去粘贴内容到文件中，必须在什么模式下，第一行才不会丢失数据？"><a href="#29-使用vi去粘贴内容到文件中，必须在什么模式下，第一行才不会丢失数据？" class="headerlink" title="29. 使用vi去粘贴内容到文件中，必须在什么模式下，第一行才不会丢失数据？"></a>29. 使用vi去粘贴内容到文件中，必须在什么模式下，第一行才不会丢失数据？</h3><p>编辑模式</p><h3 id="30-vi清空文件内容，最关键的两个命令是什么"><a href="#30-vi清空文件内容，最关键的两个命令是什么" class="headerlink" title="30. vi清空文件内容，最关键的两个命令是什么"></a>30. vi清空文件内容，最关键的两个命令是什么</h3><p>在命令行模式中，gg + dG<br>gg 跳转到第一行的第一个字母<br>dG 删除当前行及以下所有行</p><h3 id="31-经典错误1是什么，大概什么导致"><a href="#31-经典错误1是什么，大概什么导致" class="headerlink" title="31.经典错误1是什么，大概什么导致"></a>31.经典错误1是什么，大概什么导致</h3><p>command not found<br>要不就是没有安装，yum安装或者tar解压安装<br>要不就是安装好了，没有配置环境变量  到PATH里配置</p><h3 id="32-经典错误2是什么，大概什么导致"><a href="#32-经典错误2是什么，大概什么导致" class="headerlink" title="32.经典错误2是什么，大概什么导致"></a>32.经典错误2是什么，大概什么导致</h3><p>permission denied<br>首先分析出 你去访问是什么用户===》 文件或者文件夹是什么用户对应什么权限、什么用户组对应什么权限、其他用户对应什么权限，一一比对<br>是否可以满足访问的需求：如  读、写、执行<br>如果不满足，则：<br>2.1 修改对应权限 chmod<br>2.2 修改所属用户或者用户组  chown<br>2.3 切换对应的所属用户来操作（一般所属的用户的权限是 rwx）</p><h3 id="33-rwx分别代表什么"><a href="#33-rwx分别代表什么" class="headerlink" title="33. rwx分别代表什么"></a>33. rwx分别代表什么</h3><p>读 写 执行 421</p><h3 id="34-r–r—-x-数字多少"><a href="#34-r–r—-x-数字多少" class="headerlink" title="34.r–r—-x  数字多少"></a>34.r–r—-x  数字多少</h3><p>441</p><h3 id="35-切换用户命令是什么，带-有什么作用"><a href="#35-切换用户命令是什么，带-有什么作用" class="headerlink" title="35.切换用户命令是什么，带-  有什么作用"></a>35.切换用户命令是什么，带-  有什么作用</h3><p>su    带-表示切换到用户的家目录</p><h3 id="36-临时最大权限的命令是什么，该怎么配置？"><a href="#36-临时最大权限的命令是什么，该怎么配置？" class="headerlink" title="36.临时最大权限的命令是什么，该怎么配置？"></a>36.临时最大权限的命令是什么，该怎么配置？</h3><p>sudo   编辑/etc/sudoers  添加ruozedata(用户名)  ALL=(ALL)       ALL</p><h3 id="37-vi-简述编辑流程的快捷键"><a href="#37-vi-简述编辑流程的快捷键" class="headerlink" title="37.vi 简述编辑流程的快捷键"></a>37.vi 简述编辑流程的快捷键</h3><p>i    –&gt;编辑模式<br>编辑内容<br>esc    –&gt;退出编辑模式<br>shift+:    –&gt;尾行模式<br>wq    –&gt;保存退出</p><h3 id="38-全局环境变量在哪，怎么生效"><a href="#38-全局环境变量在哪，怎么生效" class="headerlink" title="38.全局环境变量在哪，怎么生效"></a>38.全局环境变量在哪，怎么生效</h3><p>/etc/profile<br>用vi /etc/profile进入 增加变量<br>然后source生效 source /etc/profile</p><h3 id="39-个人环境变量文件默认在哪？一般使用哪个？-个人环境变量文件一定在默认位置吗？（一般存放在当前用户的家目录）"><a href="#39-个人环境变量文件默认在哪？一般使用哪个？-个人环境变量文件一定在默认位置吗？（一般存放在当前用户的家目录）" class="headerlink" title="39.个人环境变量文件默认在哪？一般使用哪个？ 个人环境变量文件一定在默认位置吗？（一般存放在当前用户的家目录）"></a>39.个人环境变量文件默认在哪？一般使用哪个？ 个人环境变量文件一定在默认位置吗？（一般存放在当前用户的家目录）</h3><p>默认在/.bash_profile 和/.bashrc位置<br>一般使用/.bashrc</p><h3 id="40-声明环境变量-必须类似这样-export-JAVA-HOME-usr-java-jdk1-8，是否有问题？"><a href="#40-声明环境变量-必须类似这样-export-JAVA-HOME-usr-java-jdk1-8，是否有问题？" class="headerlink" title="40.声明环境变量  必须类似这样  export  JAVA_HOME = /usr/java/jdk1.8，是否有问题？"></a>40.声明环境变量  必须类似这样  export  JAVA_HOME = /usr/java/jdk1.8，是否有问题？</h3><p>exprot JAVA_HOME=/usr/java/jdk1.8<br>export PATH=$JAVA_HOME/bin:$PATH【推荐】<br>=前后不能有空格<br>在环境变量文件 PATH=$JAVA_HOME/bin:$PATH    这样写法一般在最后，是声明JAVA的bin文件夹的可执行文件 java，这样敲命令 java，就能够找到</p><h3 id="41-发现用户无法登录或者无法执行命令-，有可能什么文件导致？"><a href="#41-发现用户无法登录或者无法执行命令-，有可能什么文件导致？" class="headerlink" title="41.发现用户无法登录或者无法执行命令 ，有可能什么文件导致？"></a>41.发现用户无法登录或者无法执行命令 ，有可能什么文件导致？</h3><p>/etc/passwd文件中用户的最后一段为 /bin/false<br>mysqladmin:x:514:101::/usr/local/mysql:/bin/bash</p><h3 id="42-同事给你交接服务器，就简单交接，请问拿到服务器，一般操作什么？"><a href="#42-同事给你交接服务器，就简单交接，请问拿到服务器，一般操作什么？" class="headerlink" title="42.同事给你交接服务器，就简单交接，请问拿到服务器，一般操作什么？"></a>42.同事给你交接服务器，就简单交接，请问拿到服务器，一般操作什么？</h3><p>查看一下常规操作有哪些，搜索一下相应的软件包在什么地方。查看内网，外网的端口，有sudo权限的用户。<br>find / -name ‘<em>xxx</em>‘ 查看部署内容和位置<br>history</p><h3 id="43-在生产上常见错误是什么-，当前讲了两个"><a href="#43-在生产上常见错误是什么-，当前讲了两个" class="headerlink" title="43.在生产上常见错误是什么 ，当前讲了两个"></a>43.在生产上常见错误是什么 ，当前讲了两个</h3><p>commond not found命令找不到和permission defined权限错误</p><h3 id="44-sudo-su-分别做什么，sudo-su-jepson-这样执行是否OK？"><a href="#44-sudo-su-分别做什么，sudo-su-jepson-这样执行是否OK？" class="headerlink" title="44.sudo  su 分别做什么，sudo su - jepson  这样执行是否OK？"></a>44.sudo  su 分别做什么，sudo su - jepson  这样执行是否OK？</h3><p>sudo普通用户临时切换root的权限，su切换用户<br>可以执行</p><h2 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h2><h3 id="想要把xx这个用户的主族和附加组调换"><a href="#想要把xx这个用户的主族和附加组调换" class="headerlink" title="想要把xx这个用户的主族和附加组调换"></a>想要把xx这个用户的主族和附加组调换</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> usermod -g dw xx 强制dw为xx的主族，但是会丢失xx附加组</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> usermod -aG xx xx 增加xx附加组</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;日常练习题目&quot;&gt;&lt;a href=&quot;#日常练习题目&quot; class=&quot;headerlink&quot; title=&quot;日常练习题目&quot;&gt;&lt;/a&gt;日常练习题目&lt;/h2&gt;&lt;h3 id=&quot;1-查看当前目录&quot;&gt;&lt;a href=&quot;#1-查看当前目录&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    
    <category term="linux" scheme="http://example.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>linux命令</title>
    <link href="http://example.com/2020/11/22/linuxone/"/>
    <id>http://example.com/2020/11/22/linuxone/</id>
    <published>2020-11-22T10:34:00.000Z</published>
    <updated>2021-01-18T14:14:20.330Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Linux常用命令"><a href="#Linux常用命令" class="headerlink" title="Linux常用命令"></a>Linux常用命令</h1><h2 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h2><p> 查看当前光标所在的目录（目录，即path）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">pwd</span></span></span><br></pre></td></tr></table></figure><p><img src="/img/studyone/studyoneone.png" alt="avatar"><br>/代表根</p><h2 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h2><p> 显示文件夹和文件的名称</p><h3 id="ll"><a href="#ll" class="headerlink" title="ll"></a>ll</h3><p> 可以看到权限、用户用户组 时间 大小等额外信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ls -l</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ll</span></span><br></pre></td></tr></table></figure><h3 id="ll-a"><a href="#ll-a" class="headerlink" title="ll -a"></a>ll -a</h3><p>可以显示隐藏文件夹和文件（以.开头的文件或者文件夹就叫隐藏文件夹）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ls -l -a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ll -a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -la</span></span><br></pre></td></tr></table></figure><h3 id="ll-h"><a href="#ll-h" class="headerlink" title="ll -h"></a>ll -h</h3><p>仅仅查看文件的大小，而文件夹及其子目录或文件的大小不会显示</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ls -l -h</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ll -h</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -lh</span></span><br></pre></td></tr></table></figure><h3 id="ll-rt"><a href="#ll-rt" class="headerlink" title="ll -rt"></a>ll -rt</h3><p>按时间排序 -r 表示反转排序顺序 -t表示时间<br>ll -t 按时间降序  ll -rt 按时间升序 </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ls -l -r -t</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ll -rt</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -lrt</span></span><br></pre></td></tr></table></figure><h2 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h2><p>创建文件夹</p><h3 id="并联创建文件夹"><a href="#并联创建文件夹" class="headerlink" title="并联创建文件夹"></a>并联创建文件夹</h3><p>文件1 2 3在同一层</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mkdir 1 2 3</span></span><br></pre></td></tr></table></figure><h3 id="串联创建文件夹-级联"><a href="#串联创建文件夹-级联" class="headerlink" title="串联创建文件夹 级联"></a>串联创建文件夹 级联</h3><p>文件5在文件4内 文件6在文件5内</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mkdir -p 4/5/6</span></span><br></pre></td></tr></table></figure><h2 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h2><p>切换目录（路径path）</p><h3 id="切换到指定目录"><a href="#切换到指定目录" class="headerlink" title="切换到指定目录"></a>切换到指定目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> [dirName]</span></span><br></pre></td></tr></table></figure><p>dirName:要切换的目标目录</p><h3 id="切换到上一层目录"><a href="#切换到上一层目录" class="headerlink" title="切换到上一层目录"></a>切换到上一层目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ../</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ../../</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ../../../</span></span><br></pre></td></tr></table></figure><p>../的数量代表层数</p><h3 id="切换到家目录"><a href="#切换到家目录" class="headerlink" title="切换到家目录"></a>切换到家目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /root   家目录路径补全</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> 直接回车（推荐）</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ~</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ~/1</span></span><br></pre></td></tr></table></figure><p>推荐使用cd 直接回车<br>在需要进入家目录里的1文件时使用cd ~/1<br>cd - 回退到上一次目录</p><h2 id="目录（路径）"><a href="#目录（路径）" class="headerlink" title="目录（路径）"></a>目录（路径）</h2><p>绝对目录：/根目录开头，路径是齐全的<br>相对目录：不是以/开头，路径是短的</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> 1</span></span><br></pre></td></tr></table></figure><p>相对目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /root/1</span></span><br></pre></td></tr></table></figure><p>绝对目录</p><h2 id="命令帮助-help"><a href="#命令帮助-help" class="headerlink" title="命令帮助 help"></a>命令帮助 help</h2><p>在使用命令不熟练时，可以通过help命令查看如何使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mkdir --<span class="built_in">help</span></span></span><br></pre></td></tr></table></figure><p><img src="/img/studyone/studyonetwo.png" alt="avatar"><br>其中[OPTION]代表可选项<br>…代表可以有多个参数<br>与DIRECTORY类似单独的大写字母代表必选项</p><h2 id="man"><a href="#man" class="headerlink" title="man"></a>man</h2><p>相比于help，是更为详细的命令帮助</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> man mkdir</span></span><br></pre></td></tr></table></figure><h2 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h2><p>清理屏幕（并不是清掉之前的命令，而是将光标移到顶端）</p><h2 id="mv-cp"><a href="#mv-cp" class="headerlink" title="mv cp"></a>mv cp</h2><p>mv 移动，始终是一份文件，快，类似于windows的剪切粘贴<br>cp 拷贝，最终有两份，慢，类似于windows的复制粘贴</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mkdir dir1 dir2</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mv dir1 dir2     非标准操作</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mv dir1 dir2/dir1  标准操作</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mv dir1 dir2/dir11 修改名称</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mkdir dir1 dir2</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp -r dir1 dir2     非标准操作</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp -r dir1 dir2/dir1  标准操作</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp -r dir1 dir2/dir11 修改名称</span></span><br></pre></td></tr></table></figure><h2 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h2><h3 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h3><p>创建一个空文件（推荐）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> touch 1.log</span></span><br></pre></td></tr></table></figure><h3 id="vi"><a href="#vi" class="headerlink" title="vi"></a>vi</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vi 2.log</span></span><br></pre></td></tr></table></figure><p>创建一个空文件，默认进入命令行模式<br>i键：从命令行模式进入INSERT模式，编辑模式<br>esc键：从编辑模式进入命令行模式<br>:键：从命令行变为尾行模式<br>数据wq保存（w保存，q退出）<br>:wq 保存退出<br>:wq! 强制保存退出<br>:q 强制退出</p><p>如果进入提示是swap file（原因是编辑文件时非正常退出）<br>E325: ATTENTION<br>Found a swap file by the name “.rz.txt.swp”<br>          owned by: root   dated: Sun Nov  8 22:17:56 2020<br>         file name: ~root/rz.txt<br>此时用ll -a查看，对.rz.txt.swp文件进行删除即可<br>其中粘贴的坑，必须进入编辑模式，否则第一行会丢失数据【生产巨坑】</p><p>在命令行模式，常用的快捷方式：<br>dd 删除当前行<br>dG 删除当前行及以下所有行<br>ndd 删除当前行及以下n-1行<br>gg 跳转到第一行的第一个字母<br>G 跳转到最后一行的第一个字母<br>shift+$ 跳转到该行行尾<br>生产场景：window电脑的服务的配置文件内容修改过最新的，想要覆盖生产的文件<br>gg dG<br>i<br>从window电脑拷贝全局内容<br>到Linux的会话编辑模式中，按鼠标的右键，粘贴<br>esc<br>shfit+:  wq<br>完成，一气呵成</p><p>如果想要每一行的最前面都显示一个行号，进入尾行模式输入set nu回车<br>去除行号 set nonu</p><h3 id="清空文件内容-为空文件"><a href="#清空文件内容-为空文件" class="headerlink" title="清空文件内容 为空文件"></a>清空文件内容 为空文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cat /dev/null &gt; 3.log   </span></span><br></pre></td></tr></table></figure><p>推荐使用</p><h3 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span><span class="string">&quot;&quot;</span> &gt; 1.log    </span></span><br></pre></td></tr></table></figure><p>慎用<br>“&gt;” 将文本内容覆盖掉 【高危命令】<br>如果怕错，可以先备份一下，养成好的习惯，例如 cp conf conf20201123<br>“&gt;&gt;”将文本内容追加</p><h2 id="查看文件内容"><a href="#查看文件内容" class="headerlink" title="查看文件内容"></a>查看文件内容</h2><h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cat 1.log</span></span><br></pre></td></tr></table></figure><p>显示所有内容，适合显示内容比较少的文件，ctrl+z中断（推荐）<br>如果文件内容多 定位ERROR或者其他关键词的信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cat 1.log | grep ERROR</span></span><br></pre></td></tr></table></figure><p>当前行   | 管道符 grep过滤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cat 1.log | grep -A 10 ERROR</span></span><br></pre></td></tr></table></figure><p>后十行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cat 1.log | grep -B 10 ERROR</span></span><br></pre></td></tr></table></figure><p>前十行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cat 1.log | grep -C 10 ERROR</span></span><br></pre></td></tr></table></figure><p>前后各十行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cat 1.log | grep -C 10 ERROR &gt; 2.log</span></span><br></pre></td></tr></table></figure><p>将ERROR信息输出到2.log，方便查看</p><h3 id="通过编辑去搜索"><a href="#通过编辑去搜索" class="headerlink" title="通过编辑去搜索"></a>通过编辑去搜索</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vi 1.log</span></span><br></pre></td></tr></table></figure><p>输入：进入尾行模式，输入/ERROE，n键寻找</p><h3 id="more"><a href="#more" class="headerlink" title="more"></a>more</h3><p>按页显示内容，按空格一页一页下翻。ctrl+b回退，q退出（推荐）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> more 1.log</span></span><br></pre></td></tr></table></figure><h3 id="less"><a href="#less" class="headerlink" title="less"></a>less</h3><p>一行一行显示内容，按键盘上下键翻动，q键退出</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> less 1.log</span></span><br></pre></td></tr></table></figure><h3 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h3><p>实时查看文件内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tail -f 1.log</span></span><br></pre></td></tr></table></figure><p>-f 假如文件被移除，然后重命名，就无法再监控到文件，例如log4j的规则</p><p>log4j的规则：日志大小为100M，保留10份<br>例如：erp.log</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mv erp.log erp1.log</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> touch erp.log</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mv erp.log erp2.log</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> touch erp.log</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>最终erp.log为空的，然后有erp1-10.log，每个100M</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tail -F 1.log</span></span><br></pre></td></tr></table></figure><p>-F 假如文件被移除，然后重命名，会不断retry，直到再次监控到该文件 (-F =-f + retry) </p><p>想要查看文件内容倒数100行，且实时监控</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tail -100f 1.log</span></span><br></pre></td></tr></table></figure><h2 id="上传下载"><a href="#上传下载" class="headerlink" title="上传下载"></a>上传下载</h2><p>可以将Linux中的日志文件下载到windows，再用windows的工具去查找ERROR<br>其中在使用notepad++的时候，注意Encode，不然会产生乱码</p><p>问题：将日志文件下载到windows，如果log源文件较大，那么下载的时候是不是走外网带宽，比如10M，会不会影响公司服务？<br>答：会影响公司其他人使用服务器，不影响专用的服务，业务高峰或者工作日白天尽量不要做，非要做建议使用工具ftp限速下载。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum install -y lrzsz</span></span><br></pre></td></tr></table></figure><p>安装工具包</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sz 1.log</span></span><br></pre></td></tr></table></figure><p>从linux下载到window</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> rz 直接回车</span></span><br></pre></td></tr></table></figure><p>从window上传到linux</p><h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><p>alias 命令别名<br>在生产上，常用的命令或者复杂的命令，可以使用别名简化，不过此命令不是全局生效的，如果要全局生效，可以使用全局变量<br>比如要cd到一个很深的目录，可以使用alias p=’cd /…/…/…/…’</p><h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><p>全局变量：/etc/profile<br>设置好全局变量之后，可以使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">source</span> /etc/profile</span></span><br></pre></td></tr></table></figure><p>当前会话生效,已经开启的会话不会跟着自动生效，需要重新执行生效命令,新开的会话是自动的生效 </p><h3 id="个人变量"><a href="#个人变量" class="headerlink" title="个人变量"></a>个人变量</h3><p>~/.bash_profile<br>~/.bashrc 推荐</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">source</span> .bash_profile</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> . .bash_profile</span></span><br></pre></td></tr></table></figure><p>都可以使个人变量生效<br>场景：ssh远程执行B机器，启动服务命令，报错：java command not found；但是直接登陆B机器，命令可以找到<br><a href="https://blog.csdn.net/whitehack/article/details/51705889">https://blog.csdn.net/whitehack/article/details/51705889</a><br>结论：配置环境变量文件在 .bash_profile 是不正确的，应该配置在 .bashrc文件里。</p><h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> useradd bee</span></span><br></pre></td></tr></table></figure><p>创建用户</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> id bee</span></span><br></pre></td></tr></table></figure><p>查看用户</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> passwd bee</span></span><br></pre></td></tr></table></figure><p>设置密码</p><h2 id="自动补全"><a href="#自动补全" class="headerlink" title="自动补全"></a>自动补全</h2><p>tab键一次，如果只有一个 命令自动补全，多个没响应<br>按两次 打印出当前匹配到的所有，再挑选</p><h2 id="历史命令"><a href="#历史命令" class="headerlink" title="历史命令"></a>历史命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">history</span></span></span><br></pre></td></tr></table></figure><p>查看历史命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">history</span> -C</span></span><br></pre></td></tr></table></figure><p>清空历史<br>如果要清空历史，直连服务器 ok，跳板机(vpn)、服务器 ok，堡垒机中，每一个命令，都记录，堡垒机系统里web界面可视化，会记录到清空历史命令。</p><h2 id="删除命令"><a href="#删除命令" class="headerlink" title="删除命令"></a>删除命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> rm 1.log</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -r 1.log 会提示Y/N</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -rf /   不提示，直接删除 高危命令</span></span><br></pre></td></tr></table></figure><p>场景：<br>如果变量LOG_PATH不存在，那么rm -rf ${LOG_PATH}/* 等价于 rm -rf /* ，非常致命<br>所以需要在每次删除之前，需要判断${LOG_PATH}是否存在<br>或者在shell脚本上，第二行加上set -u，脚本在头部加上它，遇到不存在的变量就会报错，并停止执行。 【推荐】</p><h2 id="用户和用户组"><a href="#用户和用户组" class="headerlink" title="用户和用户组"></a>用户和用户组</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ll /usr/sbin/user*  查看用户</span></span><br></pre></td></tr></table></figure><p>useradd 创建<br>userdel 删除，假如这个用户的用户组只有该用户，那么也会将用户组删除；如果该用户组还有其他的用户则不会删除用户组(面试题)<br>usermod 修改</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> useradd xx</span></span><br></pre></td></tr></table></figure><p>创建用户的同时也创建一个用户组xx，默认家目录/home/xx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> id xx</span></span><br></pre></td></tr></table></figure><p>查看用户xx的信息</p><p>/etc/passwd 存放用户信息<br>xx:x:1006:1007::/home/xx:/bin/bash<br><strong>其中/bin/bash</strong> 为当该用户进入Linux命令窗口的命令解释器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ll /user/sbin/group*   查看用户组</span></span><br></pre></td></tr></table></figure><p>groupadd 创建<br>groupdel 删除<br>groupmod 修改<br>/etc/group 存放用户组信息<br>xx:x:1007:</p><h3 id="切换用户"><a href="#切换用户" class="headerlink" title="切换用户"></a>切换用户</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> su xx</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> su - xx</span></span><br></pre></td></tr></table></figure><p>‘-‘代表切换用户时执行该用户的环境变量，并且切换到家目录</p><h3 id="样式丢失"><a href="#样式丢失" class="headerlink" title="样式丢失"></a>样式丢失</h3><p><strong>1.如果删除用户的环境变量，那么会出现样式丢失</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> rm -f /home/xx/.bash*</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> su - xx</span></span><br></pre></td></tr></table></figure><p>会出现：-bash-4.2$，而不是以中括号括起来<br>也就是当前用户的所属家目录的个人环境变量文件不存在</p><p>个人环境变量文件可以从其他地方复制过来</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cp /etc/skel/.* /home/xx/</span></span><br></pre></td></tr></table></figure><p>再重新登录即可恢复样式<br><strong>2.一个用户默认创建的家目录是/home/xx，但是后期可以修改</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> usermod -d /tmp xx</span></span><br></pre></td></tr></table></figure><p>也会出现样式丢失，默认登录进去的目录为设置的/tmp</p><h3 id="添加用户到用户组"><a href="#添加用户到用户组" class="headerlink" title="添加用户到用户组"></a>添加用户到用户组</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> groupadd dw</span></span><br></pre></td></tr></table></figure><p>添加用户组</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> usermod -a -G dw xx</span></span><br></pre></td></tr></table></figure><p>添加用户xx到用户组dw<br>-a 追加<br>-G new list of supplementary GROUPS 新的补充/附加组列表<br><strong>题目：想要把xx这个用户的主族和附加组调换</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> usermod -g dw xx强制dw为xx的主族，但是会丢失xx附加组</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> usermod -aG xx xx增加xx附加组</span></span><br></pre></td></tr></table></figure><h3 id="查看用户组成员"><a href="#查看用户组成员" class="headerlink" title="查看用户组成员"></a>查看用户组成员</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> groupmems -g xx -l</span></span><br></pre></td></tr></table></figure><h2 id="passwd文件"><a href="#passwd文件" class="headerlink" title="passwd文件"></a>passwd文件</h2><p>命令 vi /etc/passwd进入passwd文件<br>1.passwd文件中的<br>xx:x:515:515::/home/xx:/bin/bash<br>被换成<br>xx:x:515:515::/home/xx:/sbin/nologin<br>显示：This account is currently not avaliable</p><p>2.被换成<br>xx:x:515:515::/home/xx:/bin/false<br>则不准登录，或者切换用户没起作用</p><p>例如CDH部署，hdfs，hbase等用户，su - hdfs切不过去，原因就在 /bin/false<br>jps命令查看都是不可用的<br>su - hdfs之前，将/bin/false改为/bin/bash即可</p><h2 id="su-sudo"><a href="#su-sudo" class="headerlink" title="su sudo"></a>su sudo</h2><p>su xx 切换用户<br>su - xx 切换用户 进入家目录 且执行该用户环境变量文件 .bashrc<br>sudo 普通用户临时使用root的最大权限<br>在/etc/sudoers中配置，使用户有sudo权限</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vi /etc/sudoers</span></span><br></pre></td></tr></table></figure><p>加入xx ALL=(root)      NOPASSWD:ALL</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sudo cat /root/1.log</span></span><br></pre></td></tr></table></figure><p>有root权限查看1.log<br>生产场景：用户的权限不满足需求，需要更高的，假如IT 和公司管理制度都还好，就要求加sudo权限。<br>否则碰见这种权限错误的操作，只能让对应的IT人员操作。</p><h2 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h2><p><strong>d rwx r-x r-x</strong><br><strong>- rw- r– r–</strong><br>第一个字符 d 代表文件夹 - 代表文件<br>接下来三个字母分别代表 读r4 写w2 执x1 -没有任何权限<br>第一组：rw- 文件或文件夹的所属用户，只有读写权限，没有执行权限<br>第二组：r– 文件或文件夹的所属用户组的成员，只有读权限<br>第三组：r– 其他用户组的成员对这个文件或文件夹的权限，只有读写权限<br><strong>权限错误的根本原因，当前用户对文件或文件夹的操作，不符合其拥有的权限</strong></p><h2 id="权限命令"><a href="#权限命令" class="headerlink" title="权限命令"></a>权限命令</h2><p>chmod -R 777 文件或文件夹<br>chown -R 用户或用户组 文件或文件夹<br>这是两个为数不多的经常会使用的-R参数的命令</p><h2 id="大小"><a href="#大小" class="headerlink" title="大小"></a>大小</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ll -h 1.log</span></span><br></pre></td></tr></table></figure><p>查看文件大小</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> du -sh /usr/<span class="built_in">local</span></span></span><br></pre></td></tr></table></figure><p>查看文件夹大小</p><h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> find / -name <span class="string">&#x27;*hadoop*&#x27;</span></span></span><br></pre></td></tr></table></figure><p>从根目录搜索名字中带hadoop的文件和文件夹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> find /home -name <span class="string">&#x27;*hadoop*&#x27;</span></span></span><br></pre></td></tr></table></figure><p>从home目录搜索名字中带hadoop的文件和文件夹</p><h2 id="磁盘"><a href="#磁盘" class="headerlink" title="磁盘"></a>磁盘</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> df -h</span></span><br></pre></td></tr></table></figure><p>查看结果中以/开头的是我们想要的信息<br>Filesystem Size Used Avail Use% Mounted on<br>/dev/vda1 40G 14G 25G 35% /</p><h2 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> free -m</span></span><br></pre></td></tr></table></figure><p>其中 -m 的意思是结果的单位是m，当然可以写作-k -g等<br>预留内存最好在15%<br>swap 因为内存不够，使用部分磁盘空间来充当内存使用，虽然可以解决内存紧缺的问题，但是效率不高。<br>尤其大数据，swap哪怕设置了大小 ，也尽量设置惰性使用。设置参数=0</p><h2 id="机器负载"><a href="#机器负载" class="headerlink" title="机器负载"></a>机器负载</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> top</span></span><br></pre></td></tr></table></figure><p>load average 生产上尽量控制在10，否则服务器就认为卡<br>若服务器卡 原因有：1.计算程序 hive sql、spark、flink 密集计算 是不是要调优<br>2.是不是被挖矿了<br>3.硬件问题，内存条损坏。解决方案 万能重启，检测是不是硬件问题。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>yum search 包名称<br>yum install -y httpd    安装<br>yum remove telnet    卸载</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> rpm -qa | grep httpd</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> rpm -e httpd-tools-2.4.6-93.el7.centos.x86_64</span></span><br></pre></td></tr></table></figure><h2 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h2><p>ps -ef | grep 进程名称</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ps -ef | grep http</span></span><br></pre></td></tr></table></figure><p>会匹配多个，如果要杀死进程得确定是否是自己想要杀的进程<br><strong>杀死进程</strong><br>kill -9 pid 高危命令<br>kill -9 111 112 113   三个进程一起杀<br>杀进程前要确定杀的都是想杀的，不要误杀。误杀会造成生产事故<br>全局杀<br>kill -9 $(pgrep -f 匹配字符)<br>kill -9 6148 6251 7485 7624 7797 21892 30993</p><h2 id="端口号"><a href="#端口号" class="headerlink" title="端口号"></a>端口号</h2><p>netstat -nlp | grep pid</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> netstat -nlp | grep 709</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> netstat -nlp | grep http</span></span><br></pre></td></tr></table></figure><p>:::80、0.0.0.0:80、192.168.1.101:80 80端口号服务可以对外，window或者其他服务器 可以ip+80 进行访问的<br>localhost:80、127.0.0.1:80 localhost 、127.0.0.1 代表本机，80端口仅限本机的其他服务可以访问，window或者其他服务器无法访问</p><p>总结：<br>a.有进程PID 不一定就有端口号<br>b.服务的通信交流，其实就是要 ip+端口号<br><strong>机器上运行xxx服务，把那个web打开一下 ？</strong><br>ip<br>ps -ef | grep xxx 找到pid<br>netstat -nlp| grep pid 找到对应端口号<br><a href="http://114.67.101.143/">http://114.67.101.143:80/</a><br><a href="http://114.67.101.143/">http://114.67.101.143/</a></p><p>window: 提前安装telnet客户端<br>linux : yum install -y telnet<br>window/linux去检测服务是否ok: telnet ip port<br>先 ping ip<br>再 telnet ip port</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet 114.67.101.143 221</span><br></pre></td></tr></table></figure><p>Trying 114.67.101.143…   Connection refused   【错误3】<br>window电脑去访问 服务器的服务<br>    先 ping ip<br>    再 telnet ip port<br>linux机器去访问  服务器的服务<br>    先 ping ip<br>    再 telnet ip port</p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>wget命令</p><h2 id="压缩-解压"><a href="#压缩-解压" class="headerlink" title="压缩 解压"></a>压缩 解压</h2><p>zip -r xxx.zip  xxx/*<br>unzip xxx.zip</p><p>tar -czvf  xxx.tar.gz xxx/*<br>tar -xzvf  xxx.tar.gz</p><h2 id="command-not-found"><a href="#command-not-found" class="headerlink" title="command not found"></a>command not found</h2><p>没有安装<br>没有配置环境变量<br>export JAVA_HOME=/usr/java/jdk1.8.0_181<br>export PATH=$JAVA_HOME/bin:$PATH   前 【推荐】<br>export PATH=$PATH:$JAVA_HOME/bin   后</p><h2 id="定时"><a href="#定时" class="headerlink" title="定时"></a>定时</h2><p>crontab -l 查看<br>crontab -e 编辑 就是编辑一个定时器文件内容<br> 代码* * * * * sleep 10s; date &gt;&gt; /root/ruoze2.log<br>每个* 分别代表分、小时、日、月、周，* 标识 每<br><strong>面试题：每隔10s 打印一次</strong><br>写脚本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vi 1.sh</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">set -u</span><br><span class="line"></span><br><span class="line">for((i&#x3D;1;i&lt;&#x3D;6;i++));</span><br><span class="line">do</span><br><span class="line">date</span><br><span class="line">sleep 10s</span><br><span class="line">done</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure><h2 id="后台执行"><a href="#后台执行" class="headerlink" title="后台执行"></a>后台执行</h2><p>nohup …..   &amp;   后台执行<br>nohup /root/aa.sh &gt;&gt; /root/bb.log 2&gt;&amp;1 &amp;   执行aa.sh脚本输出到bb.log日志</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Linux常用命令&quot;&gt;&lt;a href=&quot;#Linux常用命令&quot; class=&quot;headerlink&quot; title=&quot;Linux常用命令&quot;&gt;&lt;/a&gt;Linux常用命令&lt;/h1&gt;&lt;h2 id=&quot;pwd&quot;&gt;&lt;a href=&quot;#pwd&quot; class=&quot;headerlink</summary>
      
    
    
    
    
    <category term="linux" scheme="http://example.com/tags/linux/"/>
    
  </entry>
  
</feed>
